-- ============================================
-- Dev 모드 전용 더미 데이터
-- ============================================
-- 이 파일은 dev 프로파일에서만 실행됩니다.
-- 서버 시작 시 자동으로 데이터가 삽입됩니다.

-- 사용자 (User) 초기 데이터
-- 비밀번호: password123 (BCrypt 해시, cost factor 12)
-- 주의: BCrypt 해시는 실행 시마다 다르게 생성되므로, 실제 사용 시 BCryptPasswordEncoder로 생성된 해시를 사용해야 합니다.
-- 아래 해시는 password123에 대한 검증된 BCrypt 해시입니다 (cost factor 12, 10년 이상 안전하게 사용 가능한 강도).
-- 해시 생성: BCryptPasswordEncoder(12).encode("password123")
-- BCrypt는 cost factor가 다르더라도 matches()로 검증 가능하므로, cost 10 encoder로도 검증됩니다.
INSERT INTO user_tb (username, password, role, created_at, updated_at) VALUES
('testuser', '$2a$12$inIthYmAX/e7LoMKv8TcfeADz7592PTlggOgBWHCbLfdfp5k3Feri', 'USER', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
('testmanager', '$2a$12$inIthYmAX/e7LoMKv8TcfeADz7592PTlggOgBWHCbLfdfp5k3Feri', 'MANAGER', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
('testadmin', '$2a$12$inIthYmAX/e7LoMKv8TcfeADz7592PTlggOgBWHCbLfdfp5k3Feri', 'ADMIN', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
('demo_user', '$2a$12$inIthYmAX/e7LoMKv8TcfeADz7592PTlggOgBWHCbLfdfp5k3Feri', 'USER', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

-- Process (공정) 초기 데이터
INSERT INTO process_tb (code, name, description, sequence, created_at, updated_at) VALUES
('W', '작업', '초기 가공 작업 공정', 1, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
('P', '제조', '특정 제조 공정', 2, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
('검', '검사', '품질 검사 및 검증 공정', 3, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

-- SystemCode (시스템 코드) 초기 데이터
-- QualityRecordService에서 사용하는 code_group과 code_key 조합
INSERT INTO system_code_tb (code_group, code_key, code_value, description, is_active, created_at, updated_at) VALUES
('INDUSTRY_AVERAGE', 'NG_RATE_THRESHOLD', '1.0', '기본 NG 비율 임계값 (%)', TRUE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
('EVALUATION', 'INCREASE_RATE_THRESHOLD', '2.0', 'NG 비율 급증 판단 기준 (증가율 배수)', TRUE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
('INDUSTRY_AVERAGE', 'NG_RATE', '0.8', '업계 평균 NG 비율 (%)', TRUE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

-- Item (부품) 초기 데이터
INSERT INTO item_tb (code, name, description, category, created_at, updated_at) VALUES
('ITEM001', 'P2 부품', '엔진 제어 부품', '엔진', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
('ITEM002', '8속 부품', '변속기 부품', '변속기', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
('ITEM003', 'DCT 부품', '듀얼 클러치 변속기 부품', '변속기', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
('ITEM004', '브레이크 부품', '브레이크 시스템 부품', '브레이크', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
('ITEM005', '서스펜션 부품', '서스펜션 시스템 부품', '서스펜션', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

-- DailyProduction (일별 생산) 초기 데이터
-- 최근 7일간의 생산 데이터
-- H2 데이터베이스에서 날짜 계산: DATEADD('DAY', -N, CURRENT_DATE) 또는 (CURRENT_DATE - N) 사용
INSERT INTO daily_production_tb (item_id, production_date, total_quantity, created_at, updated_at) VALUES
(1, (CURRENT_DATE - 6), 89342, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(1, (CURRENT_DATE - 5), 92134, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(1, (CURRENT_DATE - 4), 88756, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(1, (CURRENT_DATE - 3), 95678, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(1, (CURRENT_DATE - 2), 91234, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(1, (CURRENT_DATE - 1), 93456, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(1, CURRENT_DATE, 94567, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(2, (CURRENT_DATE - 5), 45231, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(2, (CURRENT_DATE - 4), 46789, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(2, (CURRENT_DATE - 3), 44321, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(2, (CURRENT_DATE - 2), 48901, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(2, (CURRENT_DATE - 1), 46543, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(2, CURRENT_DATE, 47890, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(3, (CURRENT_DATE - 4), 23456, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(3, (CURRENT_DATE - 3), 24567, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(3, (CURRENT_DATE - 2), 23890, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(3, (CURRENT_DATE - 1), 25123, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(3, CURRENT_DATE, 24678, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

-- QualityRecord (품질 기록) 초기 데이터
-- 각 DailyProduction에 대해 3개 공정(W, P, 검)의 품질 기록 생성
-- NG 비율은 @PrePersist/@PreUpdate에서 자동 계산되지만, SQL INSERT에서는 수동 계산 필요
-- ngRate = (ng_quantity / total_quantity) * 100 (소수점 2자리)
INSERT INTO quality_record_tb (daily_production_id, process_id, ok_quantity, ng_quantity, total_quantity, ng_rate, evaluation_required, created_at, updated_at) VALUES
-- ITEM001 (P2 부품) - 첫날 데이터 (공정 W, P, 검)
(1, 1, 88567, 775, 89342, CAST(775.0 / 89342.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(1, 2, 88890, 452, 89342, CAST(452.0 / 89342.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(1, 3, 88750, 592, 89342, CAST(592.0 / 89342.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
-- ITEM001 - 둘째날 데이터
(2, 1, 91500, 634, 92134, CAST(634.0 / 92134.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(2, 2, 91890, 244, 92134, CAST(244.0 / 92134.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(2, 3, 91700, 434, 92134, CAST(434.0 / 92134.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
-- ITEM001 - 셋째날 데이터
(3, 1, 88200, 556, 88756, CAST(556.0 / 88756.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(3, 2, 88500, 256, 88756, CAST(256.0 / 88756.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(3, 3, 88400, 356, 88756, CAST(356.0 / 88756.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
-- ITEM001 - 넷째날 데이터 (NG 비율 증가 - 평가 필요)
(4, 1, 94500, 1178, 95678, CAST(1178.0 / 95678.0 * 100 AS DECIMAL(5,2)), TRUE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(4, 2, 94900, 778, 95678, CAST(778.0 / 95678.0 * 100 AS DECIMAL(5,2)), TRUE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(4, 3, 94700, 978, 95678, CAST(978.0 / 95678.0 * 100 AS DECIMAL(5,2)), TRUE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
-- ITEM001 - 다섯째날 데이터
(5, 1, 90700, 534, 91234, CAST(534.0 / 91234.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(5, 2, 90900, 334, 91234, CAST(334.0 / 91234.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(5, 3, 90800, 434, 91234, CAST(434.0 / 91234.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
-- ITEM001 - 여섯째날 데이터
(6, 1, 92900, 556, 93456, CAST(556.0 / 93456.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(6, 2, 93100, 356, 93456, CAST(356.0 / 93456.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(6, 3, 93000, 456, 93456, CAST(456.0 / 93456.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
-- ITEM001 - 오늘 데이터
(7, 1, 94000, 567, 94567, CAST(567.0 / 94567.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(7, 2, 94200, 367, 94567, CAST(367.0 / 94567.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(7, 3, 94100, 467, 94567, CAST(467.0 / 94567.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
-- ITEM002 (8속 부품) 데이터
(8, 1, 44750, 481, 45231, CAST(481.0 / 45231.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(8, 2, 44900, 331, 45231, CAST(331.0 / 45231.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(8, 3, 44800, 431, 45231, CAST(431.0 / 45231.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(9, 1, 46300, 489, 46789, CAST(489.0 / 46789.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(9, 2, 46450, 339, 46789, CAST(339.0 / 46789.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(9, 3, 46380, 409, 46789, CAST(409.0 / 46789.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(10, 1, 43850, 471, 44321, CAST(471.0 / 44321.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(10, 2, 43980, 341, 44321, CAST(341.0 / 44321.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(10, 3, 43920, 401, 44321, CAST(401.0 / 44321.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(11, 1, 48450, 451, 48901, CAST(451.0 / 48901.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(11, 2, 48580, 321, 48901, CAST(321.0 / 48901.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(11, 3, 48520, 381, 48901, CAST(381.0 / 48901.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(12, 1, 46050, 493, 46543, CAST(493.0 / 46543.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(12, 2, 46200, 343, 46543, CAST(343.0 / 46543.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(12, 3, 46140, 403, 46543, CAST(403.0 / 46543.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(13, 1, 47450, 440, 47890, CAST(440.0 / 47890.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(13, 2, 47580, 310, 47890, CAST(310.0 / 47890.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(13, 3, 47520, 370, 47890, CAST(370.0 / 47890.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
-- ITEM003 (DCT 부품) 데이터
(14, 1, 23100, 356, 23456, CAST(356.0 / 23456.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(14, 2, 23200, 256, 23456, CAST(256.0 / 23456.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(14, 3, 23150, 306, 23456, CAST(306.0 / 23456.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(15, 1, 24200, 367, 24567, CAST(367.0 / 24567.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(15, 2, 24300, 267, 24567, CAST(267.0 / 24567.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(15, 3, 24250, 317, 24567, CAST(317.0 / 24567.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(16, 1, 23550, 340, 23890, CAST(340.0 / 23890.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(16, 2, 23650, 240, 23890, CAST(240.0 / 23890.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(16, 3, 23600, 290, 23890, CAST(290.0 / 23890.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(17, 1, 24800, 323, 25123, CAST(323.0 / 25123.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(17, 2, 24900, 223, 25123, CAST(223.0 / 25123.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(17, 3, 24850, 273, 25123, CAST(273.0 / 25123.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(18, 1, 24350, 328, 24678, CAST(328.0 / 24678.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(18, 2, 24450, 228, 24678, CAST(228.0 / 24678.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(18, 3, 24400, 278, 24678, CAST(278.0 / 24678.0 * 100 AS DECIMAL(5,2)), FALSE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);
